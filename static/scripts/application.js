class ApplicationHandler{constructor(){this.date=(new Date).toLocaleString(),this.form={select:document.querySelector("[data-select]"),selectOption:this.GetURLParameter("select"),fullPositionName:document.querySelector("[data-full-position-name]"),dateInput:document.querySelector("[data-form-date]"),fileUpload:document.querySelectorAll("[data-file-upload]"),fileInputs:document.querySelectorAll("[data-file-input]"),uploadButtons:document.querySelectorAll("[data-file-input-btn]"),uploadDeleteButtons:document.querySelectorAll("[data-upload-delete-btn]"),dynamicForm:{felonyContainer:document.querySelector("[data-felony-container]"),driverSection:document.querySelector("[data-driving-section]"),dynamicRadios:document.querySelectorAll("[data-dynamic-radio]")},modal:{backdrop:document.querySelector("[data-modal-container]"),disclaimer:document.querySelector('[data-modal="disclaimer"]'),agreement:document.querySelector('[data-modal="agreement"]'),modalContinue:document.querySelectorAll("[data-modal-continue]"),attestation:document.querySelector("[data-attestation-check]")}},document.forms["contact-form"].addEventListener("submit",e=>{var t=Array.from(document.querySelectorAll('[data-required-upload="true"]'));let a=[];t.every(e=>0<e.value.length)?e.target.setAttribute("data-submittable",""):(t.map(e=>{0===e.value.length&&a.push(e.getAttribute("data-file-input-btn"))}),e.target.setAttribute("data-submittable",""+a.join("-")))}),null!=this.form.selectOption?this.form.select.value=this.form.selectOption:this.form.select.value="general",window.addEventListener("load",e=>{var t=this.form.select.options[this.form.select.selectedIndex].innerText;this.form.fullPositionName.value=t,this.form.dateInput.value=this.date,"driver"===this.form.select.selectedOptions[0].getAttribute("data-job-type")?(this.form.dynamicForm.driverSection.classList.contains("hidden")&&this.form.dynamicForm.driverSection.classList.remove("hidden"),document.querySelector('[data-required-upload="license"]').setAttribute("data-required-upload","true")):("no-felony"===this.form.select.selectedOptions[0].getAttribute("data-job-type")?(this.form.dynamicForm.driverSection.classList.contains("hidden")||this.form.dynamicForm.driverSection.classList.add("hidden"),this.form.dynamicForm.felonyContainer.classList.contains("hidden")||this.form.dynamicForm.felonyContainer.classList.add("hidden")):this.form.dynamicForm.driverSection.classList.contains("hidden")||this.form.dynamicForm.driverSection.classList.add("hidden"),document.querySelector('[data-required-upload="license"]').setAttribute("data-required-upload","license")),this.form.uploadDeleteButtons.forEach(e=>{e.addEventListener("click",this.deleteUpload)}),this.form.uploadButtons.forEach(e=>{e.addEventListener("change",e=>this.fileUploadHandler(e,this))}),this.form.select.addEventListener("change",()=>{var e=new URL(location),e=(e.searchParams.set("select",this.form.select.value),history.pushState({},"",e),"driver"===this.form.select.selectedOptions[0].getAttribute("data-job-type")?(this.form.dynamicForm.driverSection.classList.contains("hidden")&&this.form.dynamicForm.driverSection.classList.remove("hidden"),this.form.dynamicForm.felonyContainer.classList.contains("hidden")&&this.form.dynamicForm.felonyContainer.classList.remove("hidden"),document.querySelector('[data-required-upload="license"]').setAttribute("data-required-upload","true")):("no-felony"===this.form.select.selectedOptions[0].getAttribute("data-job-type")?(this.form.dynamicForm.driverSection.classList.contains("hidden")||this.form.dynamicForm.driverSection.classList.add("hidden"),this.form.dynamicForm.felonyContainer.classList.contains("hidden")||this.form.dynamicForm.felonyContainer.classList.add("hidden")):(this.form.dynamicForm.driverSection.classList.contains("hidden")||this.form.dynamicForm.driverSection.classList.add("hidden"),this.form.dynamicForm.felonyContainer.classList.contains("hidden")&&this.form.dynamicForm.felonyContainer.classList.remove("hidden")),document.querySelector('[data-required-upload="true"]').setAttribute("data-required-upload","license")),this.form.select.options[this.form.select.selectedIndex].innerText);this.form.fullPositionName.value=e}),this.form.dynamicForm.dynamicRadios.forEach(e=>{e.addEventListener("change",e=>{var t,a=e.target.getAttribute("data-dynamic-radio"),i=e.target.id,r=e.target.closest(`[data-parent-container='${a}']`).querySelector(".extra-input");/yes|part-time/.test(i)?(i=e.target.closest(`[data-parent-container='${a}']`).querySelector(`[data-required-upload="${a}"]`),r.classList.contains("hidden")&&(r.classList.remove("hidden"),r.classList.contains("has-required")&&(r.querySelector("[data-required]").required=!0),r.classList.contains("has-note")&&!(t=e.target.closest(`[data-parent-container='${a}']`).querySelector("[data-please-note]")).classList.contains("hidden")&&t.classList.add("hidden"),i)&&i.setAttribute("data-required-upload","true")):(t=e.target.closest(`[data-parent-container='${a}']`).querySelector('[data-required-upload="true"]'),r.classList.contains("hidden")||(r.classList.add("hidden"),r.classList.contains("has-required")&&(r.querySelector("[data-required]").required=!1)),r.classList.contains("has-note")&&(i=e.target.closest(`[data-parent-container='${a}']`).querySelector("[data-please-note]")).classList.contains("hidden")&&i.classList.remove("hidden"),t&&t.getAttribute("data-file-input-btn")===a&&t.setAttribute("data-required-upload",a))})}),this.form.fileUpload.forEach(e=>{e.addEventListener("dragover",this.preventDefaults),e.addEventListener("dragenter",()=>{e.classList.add("drag-over")}),e.addEventListener("dragleave",()=>{e.classList.remove("drag-over")}),e.addEventListener("drop",e=>this.fileDropHandler(e,this))}),this.openModalonLoad(),this.form.modal.modalContinue.forEach(t=>{t.addEventListener("click",e=>{"disclaimer"===t.getAttribute("data-modal-continue")?(this.form.modal.disclaimer.classList.add("hidden"),this.form.modal.agreement.classList.remove("hidden")):this.checkAttestation()&&(this.form.modal.backdrop.classList.add("hidden"),this.form.modal.agreement.classList.add("hidden"),document.body.classList.remove("no-scroll"))})})})}GetURLParameter(e){return new URL(window.location).searchParams.get(e)}preventDefaults(e){e.preventDefault(),e.stopPropagation}fileDropHandler(e,t){e.preventDefault();var a=e.target.getAttribute("data-file-upload"),a=document.querySelector(`[data-file-input-btn='${a}']`),i=e.target.getAttribute("data-file-upload");e.target.classList.remove("drag-over"),""===a.accept||""!==a.accept&&t.onlyPDF(a.accept,e.dataTransfer.files)?(a.files=e.dataTransfer.files,this.showUpload(i,a.files[0].name,t.convertSizeMB(a.files[0].size))):this.showUpload(i)}onlyPDF(e,t){return t[0].type===e}fileUploadHandler(e,t){var a=e.target.getAttribute("data-file-input-btn");""===e.target.accept||""!==e.target.accept&&t.onlyPDF(e.target.accept,e.target.files)?this.showUpload(a,e.target.files[0].name,t.convertSizeMB(e.target.files[0].size)):(e.target.value="",this.showUpload(a))}convertSizeMB(e){return(1e-6*e).toFixed(2)+" MB"}showUpload(e,t="File Type Not Accepted...",a=""){e=document.querySelector(`[data-upload-description='${e}']`);e.name=e.querySelector("[data-upload-name]"),e.size=e.querySelector("[data-upload-size]"),e.name.innerText=t,e.size.innerText=a,e.classList.remove("hidden")}deleteUpload(e){var t=e.target.getAttribute("data-upload-delete-btn"),t=document.querySelector(`[data-file-input-btn='${t}']`),e=e.target.parentNode;e.name=e.querySelector("[data-upload-name]"),e.size=e.querySelector("[data-upload-size]"),e.name.innerText="",e.size.innerText="",t.value="",e.classList.add("hidden")}openModalonLoad(){this.form.modal.backdrop.classList.contains("hidden")&&(this.form.modal.backdrop.classList.remove("hidden"),this.form.modal.disclaimer.classList.remove("hidden"),document.body.classList.add("no-scroll"))}checkAttestation(){return!!this.form.modal.attestation.checked}}let application=new ApplicationHandler;