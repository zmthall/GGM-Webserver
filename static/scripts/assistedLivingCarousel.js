let createApp=Vue3.createApp,assistedLivingCarousel={data(){return{houses:[{id:"ghorizon",images:[],name:"Golden Horizon",address:"2109 Chautard Drive Pueblo, CO 81005",additional:"",mapsURL:"https://www.google.com/maps/place/2109+Chautard+Dr,+Pueblo,+CO+81005/"},{id:"ggmi",images:[],name:"Golden Gate Manor I",address:"606 West Abriendo Ave. Pueblo, CO 81004",additional:"",mapsURL:"https://www.google.com/maps/place/606+W+Abriendo+Ave,+Pueblo,+CO+81004/"},{id:"gview",images:[],name:"Golden View",address:"525 West 9th Street Pueblo, CO 81003",additional:"*Handicap accessible facility",mapsURL:"https://www.google.com/maps/place/525+W+9th+St,+Pueblo,+CO+81003/"},{id:"gvalley",images:[],name:"Golden Valley",address:"1033 East Evans Pueblo, CO 81004",additional:"*Offering private bedrooms & bathrooms",mapsURL:"https://www.google.com/maps/place/1033+E+Evans+Ave,+Pueblo,+CO+81004/"},{id:"ggmii",images:[],name:"Golden Gate Manor II",address:"1219 Lake Ave Pueblo, CO 81004",additional:"",mapsURL:"https://www.google.com/maps/place/1219+Lake+Ave,+Pueblo,+CO+81004/"}],autoScrollInterval:null,isTabActive:!0,imageModalOpen:!1,curentModal:null,loadingImages:!1,currentImage:null,sliding:!1,currentPosition:-20}},methods:{async loadHouseDetails(){let a;await Promise.all(this.houses.map(async e=>{a="/assisted-living/"+e.id;var t=await(await fetch((t=a,new Request(t,{method:"GET",headers:{"Content-Type":"application/json"}})))).json();e.images=t.images.sort((e,t)=>e.id-t.id)}))},viewMore(e){document.querySelector(`[data-view-more='${e.id}']`).disabled=!0,document.body.classList.add("no-scroll"),this.imageModalOpen=!0,this.currentModal=e.id,this.loadImages(e)},loadImages(e){this.loadingImages=!0;let a=document.createElement("div"),t=(a.classList.add("image-container"),e.images.forEach((e,t)=>{(img=document.createElement("img")).setAttribute("data-idx",t),img.setAttribute("data-image",""+this.currentModal),0===t&&(img.classList.add("current-image"),this.currentImage=0),img.src=e.url,a.append(img)}),Array.from(a.children)),s=this;checkImages=setInterval(function(){t.every(e=>e.complete)&&(document.querySelector("[data-house-images]").append(a),s.checkImages=null,s.loadingImages=!1,clearInterval(checkImages))},100)},closeModal(){this.imageModalOpen=!1,document.querySelector(`[data-view-more='${this.currentModal}']`).disabled=!1,document.body.classList.remove("no-scroll"),this.currentImage=null},debounce(t,a){let s;return function(...e){clearTimeout(s),s=setTimeout(()=>{t.apply(this,e)},a)}},modalResize(){var e=document.querySelector(":root");2e3<=window.innerWidth?e.style.setProperty("--slide-items-shown",4):1250<=window.innerWidth?e.style.setProperty("--slide-items-shown",3):768<=window.innerWidth?e.style.setProperty("--slide-items-shown",2):e.style.setProperty("--slide-items-shown",1)},slideRight(e){-20===this.currentPosition&&(e&&(e.target.disabled=!0),document.querySelector("[data-carousel-container]").style.transition="translate 0.3s ease-in-out",this.currentPosition+=20)},slideLeft(e){-20===this.currentPosition&&(e&&(e.target.disabled=!0),document.querySelector("[data-carousel-container]").style.transition="translate 0.3s ease-in-out",this.currentPosition-=20)},autoScroll(e){!1===e?clearInterval(this.autoScrollInterval):!0!==e||this.imageModalOpen||(this.autoScrollInterval=setInterval(()=>{document.hasFocus()&&this.slideRight()},5e3))},previousImage(){var e=this.houses.find(e=>e.id===this.currentModal),e=document.querySelector("[data-house-images]").querySelectorAll(`[data-image='${e.id}']`),t=document.querySelector(".current-image");this.currentModal&&0<this.currentImage?this.currentImage--:0===this.currentImage&&(this.currentImage=e.length-1),t.classList.remove("current-image"),e[this.currentImage].classList.add("current-image")},nextImage(){var e=this.houses.find(e=>e.id===this.currentModal),e=document.querySelector("[data-house-images]").querySelectorAll(`[data-image=${e.id}]`),t=document.querySelector(".current-image");this.currentModal&&this.currentImage<e.length-1?this.currentImage++:this.currentImage===e.length-1&&(this.currentImage=0),t.classList.remove("current-image"),e[this.currentImage].classList.add("current-image")}},computed:{houseCardClass(){return e=>"house-card "+e.id},gHorizon(){return e=>"ghorizon"===e.id},carouselStyling(){return{translate:this.currentPosition+"%"}},currentImagePage(){return this.imageModalOpen&&null!==this.currentImage?this.currentImage+1:-1},totalImagePages(){return this.imageModalOpen&&this.currentModal?this.houses.find(e=>e.id===this.currentModal).images.length:-1}},created(){this.loadHouseDetails(),this.modalResize(),window.addEventListener("resize",this.debounce(this.modalResize,50))},mounted(){let t=document.querySelector("[data-carousel-container]");t.addEventListener("transitionend",e=>{"translate"===e.propertyName&&(t.style.transition="none",0===this.currentPosition?(e=Array.from(t.childNodes).filter(e=>"#text"!==e.nodeName),t.insertBefore(e[e.length-1],e[0]),this.currentPosition-=20):-40===this.currentPosition&&(e=Array.from(t.childNodes),t.insertBefore(e[1],e[e.length-1]),this.currentPosition+=20),e=document.querySelector("button:disabled"))&&(e.disabled=!1)}),this.autoScroll(!0)},unmounted(){window.removeEventListener("resize",this.debounce(this.modalResize,50))}},app=createApp(assistedLivingCarousel);app.mount("#houses-carousel");