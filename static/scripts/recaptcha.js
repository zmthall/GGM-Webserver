class OnSiteRecaptcha{constructor(){this.form=document.forms["contact-form"],this.formType=this.form.getAttribute("data-form-type"),this.publicKey="6LeZz0UqAAAAACaVm35S2EemtZ1XGc_T1GV4o0wf",this.verifyURL=this.getVerifyURL(),this.messageContainer=document.forms["contact-form"].querySelector("[data-submission-message]"),this.createEventListener()}async createEventListener(){let a=this;this.form.addEventListener("submit",t=>{t.preventDefault();let e=!1;if((!document.getElementById("attestation")||!document.getElementById("attestation").checked)&&document.getElementById("attestation")||(e=!0),""===this.form.getAttribute("data-submittable"))e?grecaptcha.ready(function(){grecaptcha.execute(a.publicKey,{action:"submit"}).then(async function(e){var t=a.form.querySelector("button"),e=a.createData(e),e=await a.verifySubmission(e);200===e.status?(a.messageContainer.innerText=`Submission ${(await e.json()).msg}, now redirecting...`,t.disabled=!0,setTimeout(()=>{var e=new URL("/contact-us/thank-you",window.location.origin);window.location.replace(e)},2e3)):401===e.status&&(a.messageContainer.innerText=`Submission ${(await e.json()).msg}...`)})}):(a.messageContainer.innerText="Form failed to be submitted... refreshing page...",setTimeout(()=>{location.reload()},1e3));else{t=this.form.getAttribute("data-submittable").split("-");let e=document.querySelector(`[data-upload-btn="${t[0]}"]`);a.messageContainer.innerText=`Make sure to upload all files required.
These uploadable items are still required: `+t.join(" | "),setTimeout(()=>{e.scrollIntoView(),e.focus()},500)}})}getVerifyURL(){return"contact"===this.formType?"/contact-us/send-email":"application"===this.formType?"/about-us/employment/apply":void 0}createData(e){var t=new FormData(document.forms["contact-form"]);return t.append("captcha",e),t}async verifySubmission(e){e=new Request(this.verifyURL,{method:"POST",body:e});try{return await fetch(e)}catch(e){return-1}}}let recaptchaController=new OnSiteRecaptcha;